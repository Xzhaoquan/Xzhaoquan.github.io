---
title: 数组指针和指针数组
date: 2022-08-29 14:25:05
tags: C语言
---

## 数组指针和指针数组

##### 1、数组指针

- 数组指针：指向数组的指针，优先级顺序是：（）> [] > *

  ```
  //根据优先级，先看括号内，则p是一个指针，这个指针指向一个一维数组，数组长度为n，这是“数组的指针”，即数组指针
  int （*p1）[5];
  ```

- 对于语句“int ( * p1)[5]”，“()”的优先级比“[]”高，“*”号和 p1 构成一个指针的定义，指针变量名为 p1，而 int 修饰的是数组的内容，即数组的每个元素。也就是说，p1 是一个指针，它指向一个包含 5 个 int 类型数据的数组，如下所示。很显然，它是一个数组指针，数组在这里并没有名字，是个匿名数组。

  ```
  		 -------------------------------------------
  p1 ----> | int * | init * | int * | init * | int * |
  		 -------------------------------------------
  ```

  ```
  #include <stdio.h>
  int main()
  {
          int (*p)[5]; //定义一个数组指针
          int arr[5] = {1,2,3,4,5}; //定义一个数组
          p = &arr;	//p指向数组首地址
          printf("p0 value = %d\r\n",*(*p + 0)); //arr[0]
          printf("p1 value = %d\r\n",*(*p + 1));	//arr[1]
          printf("p2 value = %d\r\n",*(*p + 2));	//arr[2]
          printf("p3 value = %d\r\n",*(*p + 3));	//arr[3]
          printf("p4 value = %d\r\n",*(*p + 4));  //arr[4]
  
          return 0;
  }
  
  //p 代表的是数组首地址
  //arr 代表的是整个数组首元素首地址
  //&arr 代表整个数组首地址(对数组首元素首地址取地址得到数组首地址)
  //*p 代表数组首元素首地址
  //*p+1 代表数组首元素地址 + 1
  //**p //表示数组首元素首地址对应的值
  
  //将二维数组赋给指针
  #include <stdio.h>
  int main()
  {
  		int b[3][4];
  		int (*pp)[4];//定义一个数组指针，指向含四个元素的一维数组
  		pp = b;//将该二维数组的首地址赋给pp，也就是b[0]或&b[0]，二维数组中pp=b和pp=&b[0]是等价的
  		pp++;//该语句执行过后pp的指向从行b[0][]变为了行b[1][]，pp=&b[1]
  		
  		return 0;
  }
  //根据上面二维数组可以得出，数组指针也称指向一维数组的指针，所以数组指针也称行指针。
  ```

  



##### 2、指针数组

- 指针数组：装着指针的数组，优先级顺序：[] >*

  ```
  int *p2[5];
  //根据优先级，先看[]，则p是一个数组，再结合*，这个数组的元素是指针类型，共n个元素，这是“指针的数组”，即指针数组。
  ```

- 对于int *p2[5] 来说，因为“ [] ”的优先级要比 “ * ”的优先级要高，所以p2先和“ [] ”结合，构成一个数组的定义，数组名为p2,而“ int ”修饰的是数组的内容，即数组的每个元素。也就是说，该数组包含 5 个指向 int 类型数据的指针，如下所示。因此他是一个指针数组。

  ```
  									p2
  ----------------------------------------------------------------------------
  |               |                   |                  |                   |
  int *           int *               int *              int *               int *
  ```

  ```
  #include <stdio.h>
  
  int main()
  {
  		// ptr 里面存放的是 5个字符串的首元素地址
          char *ptr[5]={"hello","world","blos","456","hhels"};
          int a = 1;
          int b = 2;
          int *p[2];
          p[0] = &a;
          p[1] = &b;
  
          printf("%d\r\n",*p[0]);
          printf("%d\r\n",*p[1]);
  
          printf("%s\r\n",ptr[0]);
  		printf("%s\r\n",ptr[1]);
          return 0;
  }
  
  ```

  

##### 对指针数组来说，首先它是一个数组，数组的元素都是指针，也就是说该数组存储的是指针，数组占多少个字节由数组本身决定；而对数组指针来说，首先它是一个指针，它指向一个数组，也就是说它是指向数组的指针.



